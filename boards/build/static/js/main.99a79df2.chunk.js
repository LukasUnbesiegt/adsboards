(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){e.exports={dateSpan:"groupDate_dateSpan__lTfzd"}},160:function(e,t,a){e.exports={borderLine:"sidebar_borderLine__1s9wK",sidebarlink:"sidebar_sidebarlink___FbBR"}},164:function(e,t,a){e.exports={editor:"Editor_editor__2lBIy",editorwrapper:"Editor_editorwrapper__3N9Eu"}},253:function(e,t,a){e.exports={sidebar:"routes_sidebar__2swop",navbarColor:"routes_navbarColor__p5x7q",iconBullet:"routes_iconBullet__1SjXO"}},254:function(e,t,a){e.exports={wrapper:"LoadingComponent_wrapper__1bc64"}},255:function(e,t,a){e.exports={ldsHourglass:"LoadingIcon_ldsHourglass__35SIx"}},263:function(e,t,a){e.exports={messageBoxWrapper:"MessageBox_messageBoxWrapper__3Qt55"}},264:function(e,t,a){e.exports={ChatBoxWrapper:"chat_ChatBoxWrapper__2cZgP"}},265:function(e,t,a){e.exports={totalSpan:"schedules_totalSpan__gIX5J"}},396:function(e,t,a){e.exports=a(751)},479:function(e,t,a){},508:function(e,t,a){e.exports={heroWrapper:"Hero_heroWrapper__1gEg_",headerText:"Hero_headerText__1ca0z",headerParagraph:"Hero_headerParagraph__DV9xZ"}},57:function(e,t,a){e.exports={ListsWrapper:"ChatLists_ListsWrapper__2QOV7",container:"ChatLists_container__2g6w2",darker:"ChatLists_darker__C-t4w",imgRight:"ChatLists_imgRight__39_jb",timeRight:"ChatLists_timeRight__1RGUD",timeLeft:"ChatLists_timeLeft__3WhRy"}},663:function(e,t,a){e.exports={tableStyle:"Table_tableStyle__37Usl"}},751:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(26),c=a.n(o),l=a(11),s=a(19),i=a(123),u=a(18),m="auth_user",d="GET_ERRORS",p={},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(u.a)({},e,{register:t.payload});case"login_user":return Object(u.a)({},e,{loginSuccess:t.payload});case m:return Object(u.a)({},e,{userData:t.payload});case"logout_user":return Object(u.a)({},e);default:return e}},f={},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case d:return Object(u.a)({},e,{error:n});case"CLEAR_ERRORS":return{};default:return e}},v=a(121),E={loading:!1},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;switch((arguments.length>1?arguments[1]:void 0).type){case"ASYNC_ACTION_START":return Object(u.a)({},e,{loading:!0});case"ASYNC_ACTION_FINISH":case"ASYNC_ACTION_ERROR":return Object(u.a)({},e,{loading:!1});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_OPEN":var a=t.payload;return{modalType:a.modalType,modalProps:a.modalProps};case"MODAL_CLOSE":return null;default:return e}},N=a(65),w=a(22),O=a.n(w),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SINGLE_BOARD":return Object(u.a)({},e,{board:t.payload});case"GET_BOARDS":return Object(u.a)({},e,{boards:t.payload});case"BOARDS_WITH_ADS":return Object(u.a)({},e,{requests:t.payload});case"GET_SCHEDULE_FOR_CHAT":return Object(u.a)({},e,{schedule:t.payload});default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SINGLE_OWNER":return Object(u.a)({},e,{owner:t.payload});default:return e}},k={},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SCHEDULES_BY":return Object(u.a)({},e,{schedules:t.payload});case"TODAY_SCHEDULES":return Object(u.a)({},e,{today:t.payload});default:return e}},_=a(249),x=a(250),A=a.n(x),I=a(251),D=a(34),R=a(116),T=Object(D.a)(),B=function(e){var t,a=[_.a,A.a,Object(R.a)(T)],n=[s.applyMiddleware.apply(void 0,a),v.b],r=I.composeWithDevTools.apply(void 0,n);return{store:Object(s.createStore)((t=T,Object(s.combineReducers)({router:Object(N.b)(t),form:i.a,user:h,async:b,modal:y,errors:g,browser:v.a,toastr:w.reducer,board:j,owner:C,schedules:S})),e,r),history:T}},L=(a(479),a(4)),M=a(5),Y=a(7),H=a(6),U=a(8),F=a(32),q=a(17),P=a(252),z=a.n(P),G=a(253),W=a.n(G),V=a(70),K=a.n(V),J=a(124),$=new(function(){function e(){Object(L.a)(this,e),this.tokenKey="auth_token",this.cartId="cart_id"}return Object(M.a)(e,[{key:"getToken",value:function(){localStorage.getItem(this.tokenKey)}},{key:"getCartToken",value:function(){localStorage.getItem(this.cartId)}},{key:"setCartToken",value:function(e){localStorage.setItem(this.cartId,e)}},{key:"setToken",value:function(e){localStorage.setItem(this.tokenKey,e)}},{key:"deleteToken",value:function(){localStorage.removeItem(this.tokenKey)}}]),e}()),Z=a(67),Q=a.n(Z),X="https://spotads.herokuapp.com/",ee="".concat(X,"api/v1"),te=new(function(){function e(){Object(L.a)(this,e),this.axiosInstance={},this.initInstance()}return Object(M.a)(e,[{key:"initInstance",value:function(){return this.axiosInstance=Q.a.create({baseURL:ee,withCredentials:"include"}),this.axiosInstance.interceptors.request.use(function(e){var t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="".concat(t)),e}),this.axiosInstance}},{key:"getInstance",value:function(){return this.axiosInstance||this.initInstance()}}]),e}()),ae=a(40),ne=a(159),re=a.n(ne),oe=X,ce=te.getInstance();var le=function(e,t){return function(a){ce.get("/chats/rooms/".concat(e)).then(function(e){t(e.data)})}};function se(e,t){return function(){var e=Object(J.a)(K.a.mark(function e(t){var a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.get("/owners/auth");case 3:a=e.sent,t({type:m,payload:a.data}),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()}var ie=a(254),ue=a.n(ie),me=a(255),de=a.n(me);function pe(){return r.a.createElement("div",{className:"".concat(de.a.ldsHourglass)})}function he(){return r.a.createElement("div",{className:"".concat(ue.a.wrapper)},r.a.createElement(pe,null))}var fe=[],ge=Object(l.connect)(function(e){return{currentModal:e.modal}})(function(e){var t,a=e.currentModal;if(a){var n=a.modalType,o=a.modalProps,c=fe.find(function(e){return e.name=n});console.log(c);var l=c.modal;t=r.a.createElement(l,o)}return r.a.createElement("span",null,t)});var ve=void 0,Ee=[{name:"boards",icon:"fa-tv",linkTo:"/spots",admin:!1,dropdowns:!1},{name:"ads requests",icon:"fa-ad",linkTo:"/ads",admin:!1,dropdowns:!1},{name:"schedules",icon:"fa-calendar-check",linkTo:"/schedules",admin:!1,dropdowns:!1},{name:"agency",icon:"fa-id-card",admin:!1,dropdowns:!0,links:[{name:"profile",linkTo:"/profile"},{name:"account ",linkTo:"/account"}]}],be=a(41),ye=a(160),Ne=a.n(ye),we=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={collapse:!1,correctLinks:[]},a.renderNavbarLinks=function(e){var t=a.props,n=(t.i,t.item,t.changeStyle),o=t.sidebarlink;return e.map(function(e,t){return r.a.createElement("li",{className:"",key:t},r.a.createElement(be.a,{className:"nav-link text-white p-3 mb-2  ".concat(o," "),to:e.linkTo},r.a.createElement("span",{style:{fontSize:"12px"}},n?"":"".concat(e.name))))})},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"render",value:function(){var e=this,t=this.props,a=t.i,o=t.item,c=t.changeStyle,l=t.sidebarlink;return r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"",key:a},r.a.createElement("a",{className:"nav-link text-white p-3 mb-2  ".concat(l," "),onClick:function(){e.toggle()}},r.a.createElement("i",{className:"fa ".concat(o.icon," fa-lg")}),r.a.createElement("span",{style:{fontSize:"12px"}},c?"":"".concat(o.name),o.dropdowns&&!c&&r.a.createElement("i",{className:"ni ni-bold-down ml-2"})))),r.a.createElement(q.b,{isOpen:this.state.collapse},r.a.createElement("div",{className:"container my-3 py-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 text-center"},this.renderNavbarLinks(o.links))))))}}]),t}(n.Component),Oe=function(e){function t(){return Object(L.a)(this,t),Object(Y.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,function(){var t=Ee.map(function(t,a){return r.a.createElement(n.Fragment,null,t.dropdowns?r.a.createElement(we,{i:a,item:t,sidebarlink:Ne.a.sidebarlink,changeStyle:e.props.changeStyle}):r.a.createElement("li",{className:"",key:a},r.a.createElement(be.a,{className:"nav-link text-white p-3 mb-2  ".concat(Ne.a.sidebarlink," "),to:t.linkTo},r.a.createElement("i",{className:"fa ".concat(t.icon," fa-lg")}),r.a.createElement("span",{style:{fontSize:"12px"}},e.props.changeStyle?"":"".concat(t.name),t.dropdowns&&!e.props.changeStyle&&r.a.createElement("i",{className:"ni ni-bold-down ml-2"})))))});return r.a.createElement(n.Fragment,null,r.a.createElement("ul",{className:"navbar-nav mt-4"},t))}())}}]),t}(n.Component),je=a(13),Ce=te.getInstance(),ke=function(e){return function(t){Ce.post("/boards/reqboards",{ownerId:e}).then(function(e){t({type:"BOARDS_WITH_ADS",payload:e.data})}).catch(function(e){})}},Se=function(){return function(e){Ce.get("/owners/single").then(function(t){e({type:"GET_SINGLE_OWNER",payload:t.data.owner})})}},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(a){Ce.post("/boards/all",{filters:e,page:t}).then(function(e){a({type:"GET_BOARDS",payload:e.data})}).catch(function(e){})}},xe=(a(508),a(510),a(511),function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={doc:null},a.componentDidMount=function(){},a.renderHero=function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Spots Page"))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return this.renderHero()}}]),t}(n.Component)),Ae=Object(l.connect)()(xe),Ie=function(e){function t(){return Object(L.a)(this,t),Object(Y.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Ae,null))}}]),t}(n.Component),De=a(117),Re=a(120),Te=a(119),Be=function(e){var t=e.input,a=e.type,n=e.placeholder,o=e.prepend,c=e.logo,l=e.styleFrom,s=e.meta,i=(s.touched,s.error);return r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("div",{className:"input-group input-group-alternative "},o&&r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:c}))),r.a.createElement("input",Object.assign({type:a,className:"form-control",style:l},t,{placeholder:n}))),i&&r.a.createElement("label",{className:"",style:{color:"red",fontSize:"10px"}},i))},Le=a(80),Me=a(257),Ye=a(164),He=a.n(Ye),Ue=(a(603),a(77)),Fe=a(258),qe=a.n(Fe),Pe=a(259),ze=a.n(Pe),Ge=function(e){function t(e){var a;Object(L.a)(this,t),(a=Object(Y.a)(this,Object(H.a)(t).call(this,e))).onEditorStateChange=function(e){a.setState({editorState:e})};var n=a.props.content?a.props.content:"",r=ze()(n);if(r){var o=Ue.ContentState.createFromBlockArray(r.contentBlocks),c=Ue.EditorState.createWithContent(o);a.state={editorState:c}}return a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.props.input;return r.a.createElement("div",{className:"container my-3 py-3"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",null,this.props.description),r.a.createElement(Me.Editor,{wrapperClassName:He.a.editorwrapper,editorClassName:He.a.editor,editorState:this.state.editorState,onEditorStateChange:this.onEditorStateChange,onChange:function(a){var n=qe()(Object(Ue.convertToRaw)(e.state.editorState.getCurrentContent()));t.onChange(n)}}))))}}]),t}(n.Component),We=a(69),Ve=a(266),Ke=a(261),Je=a.n(Ke),$e=(a(606),function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={files:[],image:{},fieldName:"",filesCropped:[],images:[]},a.componentWillReceiveProps=function(e){e.initialImages&&a.setState({images:Object(We.a)(e.initialImages)},function(){console.log(a.state.images)})},a.onDrop=function(e){a.setState({files:e,fileName:e[0].name})},a.cropImage=function(){"undefined"!==typeof a.refs.cropper.getCroppedCanvas()&&a.refs.cropper.getCroppedCanvas().toBlob(function(e){var t=URL.createObjectURL(e);a.setState({image:{cropResult:t,image:e}})})},a.loadImages=function(){var e;a.state.image.image&&(e=[].concat(Object(We.a)(a.state.filesCropped),[{blob:a.state.image.image,tempurl:a.state.image.cropResult}])),a.setState({filesCropped:e})},a.cancelCrop=function(){a.setState({files:[],image:{}})},a.removeImg=function(e){var t=a.state.filesCropped.filter(function(t){return t.tempurl!==e});a.setState({filesCropped:t})},a.uploadPhotos=function(){var e=a.props.input;if(a.state.filesCropped.length>0){var t=a.state.filesCropped.map(function(e){return e.blob});w.toastr.info("image","uploading please wait"),a.props.sendImages(t,function(t){a.setState(function(e,a){return{filesCropped:[],files:[],image:{},images:[].concat(Object(We.a)(t.results),Object(We.a)(e.images))}},function(){w.toastr.success("successfully uploaded ".concat(t.results.length," photos")),e.onChange(a.state.images)})})}},a.deleteImage=function(e,t){a.props.deleteOriginalImg(e,t);var n=a.state.images.filter(function(t){return t.public_id!==e});a.setState({images:n},function(){a.props.input.onChange(a.state.images),w.toastr.warning("deleted")})},a.renderUploadedImages=function(){return console.log(a.state.images),a.state.images.map(function(e,t){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("img",{style:{height:"100px",width:"250px",objectFit:"scale-down"},src:e.url,alt:"Card image cap"}))})},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container-fluid my-4"},r.a.createElement("h3",{className:"text-center"},"photos for Spot Location"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement(Ve.a,{onDrop:this.onDrop,multiple:!1},r.a.createElement("div",{style:{paddingTop:"30px",textAlign:"center"}},r.a.createElement("span",null,"please upload or drop photos here")))),r.a.createElement("div",{className:"col-md-6 col-lg-6"},this.state.files[0]&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement(Je.a,{style:{height:200,width:"100%"},ref:"cropper",src:this.state.files[0].preview,aspectRatio:this.props.upper/this.props.lower,viewMode:0,dragMode:"move",guides:!1,scalable:!1,cropBoxMovable:!0,cropBoxResizable:!0,crop:this.cropImage})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"btn-group btn-group-sm",role:"group"},r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:function(){e.loadImages()}},"Add"),r.a.createElement("button",{onClick:function(){e.cancelCrop()},type:"button",class:"btn btn-secondary"},"Cancel"),r.a.createElement("button",{onClick:function(){e.uploadPhotos()},type:"button",class:"btn btn-danger"},"Upload All")))))),this.state.filesCropped.length>0&&r.a.createElement("h4",null,"New Images"),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",margin:"20px"}},this.state.filesCropped&&this.state.filesCropped.map(function(t){return r.a.createElement("div",null,r.a.createElement("i",{className:"ni ni-fat-remove",style:{cursor:"pointer",fontSize:"30px",color:"red"},onClick:function(){e.removeImg(t.tempurl)}}),r.a.createElement("br",null),r.a.createElement("img",{style:{height:"100px",width:"250px",objectFit:"scale-down"},src:t.tempurl,alt:"Card image cap"}))}))),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",margin:"20px"}},this.renderUploadedImages()))}}]),t}(n.Component)),Ze={deleteOriginalImg:function(e,t){return function(a){Ce.post("/boards/upload/".concat(t,"/").concat(e)).then(function(e){a({})}).catch(function(e){console.log(e)})}},sendImages:function(e,t){return function(a){for(var n=new FormData,r=0;r<e.length;r++)n.append("file".concat(r),e[r]);Ce.post("/boards/upload",n).then(function(e){t(e.data)})}}},Qe=Object(l.connect)(null,Ze)($e),Xe=a(262),et=a.n(Xe),tt=function(e){e.text;return r.a.createElement("div",null,r.a.createElement("i",{className:"ni ni-pin-3",style:{color:"red",fontSize:"20px"}}))},at=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={lat:a.props.coordinates[1],lng:a.props.coordinates[0]},a.handleClick=function(e){a.setState({lat:e.lat,lng:e.lng},function(){a.props.changeLatLng(a.state.lat,a.state.lng)})},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"my-2 py-2 container"},r.a.createElement("div",{className:"d-flex my-2 py-2 flex-row justify-content-center"},r.a.createElement("div",{className:"p-3 m-3"},"Your Latitude : ",r.a.createElement("span",{style:{backgroundColor:"orange",color:"white"}},this.state.lat)),r.a.createElement("div",{className:"p-3 m-3 "},"Your Longtitude :  ",r.a.createElement("span",{style:{backgroundColor:"orange",color:"white"}},this.state.lng))),r.a.createElement("div",{style:{width:"100%",height:"500px"}},r.a.createElement(et.a,{bootstrapURLKeys:{key:"AIzaSyD9EdV2JfPG1Vfviw9gf_HlblIUfs7Ie2E"},defaultCenter:this.props.center,defaultZoom:this.props.zoom,onClick:this.handleClick},r.a.createElement(tt,{lat:this.state.lat,lng:this.state.lng,text:"My Marker"}))))}}]),t}(n.Component),nt=a(122);var rt=function(e){return r.a.createElement("div",null,r.a.createElement(nt.a,{name:"targets",component:function(e){var t=e.fields;return r.a.createElement("div",{className:"container my-3 py-3 "},r.a.createElement("ul",{style:{listStyle:"none"}},r.a.createElement("button",{className:"btn  btn-sm",onClick:function(){t.push("")},type:"button",style:{backgroundImage:"linear-gradient(120deg, #f6d365 0%, #fda085 100%)",color:"white"}},"click to add target group"),t.map(function(e,a){return r.a.createElement("li",{key:a,className:""},r.a.createElement(q.a,{close:!0,onClick:function(){return t.remove(a)}}),r.a.createElement("div",{className:"container card my-3 py-2 "},r.a.createElement(Re.a,{name:"".concat(e),type:"text",component:Be,placeholder:"click to add target",styleFrom:{color:"black"}})))})))}}))};var ot=Object(Te.a)({form:"create-board",validate:function(e){var t={};return e.id||(t.id="board id is required"),e.name||(t.name="board name is required"),e.size||(t.size={width:"width of board is required",height:"height of board required"}),e.price||(t.price={normal:"normal price required",promo:"promo price required"}),t}})(function(e){var t=e.handleSubmit,a=e.submitCallBack,n=e.selectRegion,o=e.selectCountry,c=e.country,l=e.region,s=e.center,i=e.zoom,u=e.changeLatLngHandler,m=e.initialValues;return console.log(m),r.a.createElement("form",{onSubmit:t(a)},r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"text-muted text-center my-2 py-2"},"Information"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"id",placeholder:"unique ID",type:"text"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"name",placeholder:"spot name",type:"text"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"price.normal",placeholder:"normal price",type:"number"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"price.promo",placeholder:"promo price",type:"number"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"size.width",placeholder:"width in inches",type:"number"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"size.height",placeholder:"height in inches",type:"number"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Re.a,{component:Be,name:"population",placeholder:"estimate population",type:"number"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(rt,null))),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Re.a,{component:Ge,name:"description",description:"Spot Place Description"}))),r.a.createElement("h4",{className:"text-muted text-center my-2 py-2"},"Location Setting"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 col-sm-12 mb-2"},r.a.createElement(Le.a,{value:c,onChange:function(e){return o(e)},classes:"custom-select"})),r.a.createElement("div",{className:"col-lg-6 col-sm-12"},r.a.createElement(Le.b,{country:c,value:l,onChange:function(e){return n(e)},classes:"custom-select",showDefaultOption:!0}))),r.a.createElement("p",{className:"text-muted text-center my-2 py-2"},"Click in Map for your spot detailed position"),r.a.createElement("div",{className:"container my-3 py-3"},r.a.createElement("div",{className:""},r.a.createElement(at,{center:s,zoom:i,changeLatLng:u,coordinates:m?m.location.coordinates:["",""]}))),r.a.createElement("div",null,r.a.createElement(Re.a,{component:Qe,name:"photos",initialImages:m?m.photos:[],upper:10,lower:10})),r.a.createElement("button",{style:{backgroundImage:"radial-gradient(circle 248px at center, #9DC3C1 0%, #9DC3C1  47%, #9DC3C1 100%)",color:"white"},className:"btn btn-block",type:"submit"},m?"Edit Spot Location":"Add Spot Location")))}),ct=function(e){return null===e||void 0===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},lt=function(e){return e.map(function(e){return e.amount}).reduce(function(e,t){return e+t})},st=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={country:"Tunisia",region:"Tunis",center:{lat:36.8065,lng:10.1815},zoom:15,lat:null,lng:null},a.componentWillUnmount=function(){a.props.clearForm("GET_SINGLE_BOARD")},a.latlngHandler=function(e,t){a.setState({lat:e,lng:t})},a.submitHandler=function(e){var t={id:e.id,name:e.name,price:e.price,description:e.description,country:a.state.country,region:a.state.region,population:e.population,targets:e.targets,size:e.size,coordinates:[a.state.lng,a.state.lat],photos:e.photos};a.props.initialValues?a.props.editBoard(t,a.props.initialValues._id):a.props.createBoard(t)},a.selectCountry=function(e){a.setState({country:e})},a.selectRegion=function(e){a.setState({region:e})},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container my-4 py-4"},r.a.createElement(ot,{submitCallBack:this.submitHandler,selectCountry:function(t){e.selectCountry(t)},selectRegion:function(t){e.selectRegion(t)},country:this.state.country,region:this.state.region,center:this.state.center,zoom:this.state.zoom,changeLatLngHandler:this.latlngHandler,initialValues:this.props.initialValues,clearForm:this.props.clearForm,initialImages:this.props.initialValues?this.props.initialValues.photos:[]}))}}]),t}(n.Component),it={createBoard:function(e){return function(t){Ce.post("/boards",e).then(function(e){t(_e()),t(Object(je.d)("/spots"))})}},getOwner:Se,clearForm:function(e){return function(t){t({type:e,payload:null})}},editBoard:function(e,t){return function(a){Ce.post("/boards/edit",{board:e,boardId:t}).then(function(e){w.toastr.info("edited"),a(_e()),a(Object(je.d)("/spots"))})}}},ut=Object(l.connect)(function(e){return{initialValues:ct(e.board)?null:e.board.board}},it)(st),mt=(a(663),function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={dropdownOpen:!1},a.toggle=function(){a.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},a.productEditHandler=function(e){(0,a.props.editHandler)(e)},a.deletingHandler=function(e){a.props.deleteHandler(e)},a.productViewHandler=function(e){a.props.viewHandler(e)},a.renderTableHeads=function(){return a.props.tableheads.map(function(e,t){return r.a.createElement("th",{key:t},e)})},a.renderTableRows=function(){var e=a.props,t=e.rows,n=(e.selectedRowItems,e.tableheads),o=(e.editStyle,e.handlers);if(t)return t.map(function(e,t){return console.log(e),r.a.createElement("tr",{key:t},n.map(function(t,a){return r.a.createElement("td",{key:a},e[t])}),r.a.createElement("td",null,(a=e.id,r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn  btn-sm btn-secondary dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"manage"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuLink"},function(){if(o)return o.map(function(e,t){return r.a.createElement("a",{class:"dropdown-item",onClick:function(){e.func(a,c)}},e.name)})}())))));var a,c})},a.renderTable=function(){return r.a.createElement(q.k,{hover:!0,bordered:!0,responsive:!0},r.a.createElement("thead",null,a.renderTableHeads()),r.a.createElement("tbody",null,a.renderTableRows()))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},this.renderTable())}}]),t}(n.Component)),dt=a(21),pt=a.n(dt),ht=function(e){function t(){return Object(L.a)(this,t),Object(Y.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e,t,a,n,o=this.props,c=o.items,l=o.isActiveColor,s=o.submitCallback;c&&(e=c.lastPage,t=c.hasNextPage,a=c.hasPreviousPage,n=c.currentPage);return r.a.createElement("div",null,r.a.createElement(q.h,{"aria-label":"Page navigation example"},a&&r.a.createElement(q.i,null,r.a.createElement(q.j,{previous:!0,onClick:function(){c&&s(null,c.currentPage-1)}})),function(){if(e)return Array.from(Array(e),function(e,t){var a;return a=t+1===n?"".concat(l):"transparent",r.a.createElement(q.i,null,r.a.createElement(q.j,{style:{backgroundColor:a},onClick:function(){c&&s(null,t+1)}},t+1))})}(),t&&r.a.createElement(q.i,null,r.a.createElement(q.j,{next:!0,onClick:function(){c&&s(null,c.currentPage+1)}}))))}}]),t}(n.Component),ft=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).submitHandler=function(e,t){a.props.getBoards(e,t)},a._editHandler=function(e){a.props.getSingleBoard(e)},a._deleteHandler=function(e){a.props.deleteBoard(e)},a._viewHandler=function(){alert("Nothing to view for board")},a._lockHandler=function(e){a.props.lockBoard(e)},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e;return console.log(this.props.boards),this.props.boards&&this.props.boards.boards.length>0&&(e=this.props.boards.boards.map(function(e){var t=pt()(e.createdAt).format("YYYY MM DD");return{id:e._id,name:e.name,region:e.region,locked:e.locked?"true":"false",createdAt:t,price:e.price.normal||"no price",company:e.owner.company||"no company",population:e.population||"no population"}}),console.log(e)),r.a.createElement(n.Fragment,null,r.a.createElement("h5",{className:"text-center text-muted display-4 my-3 py-3"},"All Spots you owned"),r.a.createElement("div",{className:"my-2 py-2"},r.a.createElement(ht,{items:this.props.boards?this.props.boards:[],submitCallback:this.submitHandler})),r.a.createElement("div",{className:""},r.a.createElement(mt,{tableheads:["id","name","region","locked","createdAt","price","company","population"],rows:e,handlers:[{name:"edit",func:this._editHandler},{name:"delete",func:this._deleteHandler},{name:"lock/unlock",func:this._lockHandler}]})))}}]),t}(n.Component),gt={deleteBoard:function(e){return function(t){Ce.post("/boards/single/delete",{boardId:e}).then(function(e){w.toastr.info("delete a board"),t(_e())}).catch(function(e){console.log(e.response.data),w.toastr.error("can't delete this board. it has scheduled ads or requests")})}},getSingleBoard:function(e){return function(t){Ce.get("/boards/single/".concat(e)).then(function(e){t({type:"GET_SINGLE_BOARD",payload:e.data.board}),t(Object(je.d)("/spots/create"))})}},lockBoard:function(e){return function(t){Ce.post("/boards/lock",{boardId:e}).then(function(e){w.toastr.info("lock/unlock activate"),t(_e())})}},getBoards:_e},vt=Object(l.connect)(function(e){return{boards:e.board?e.board.boards:[]}},gt)(ft),Et=function(e){function t(){return Object(L.a)(this,t),Object(Y.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.getBoards(),this.props.getOwner()}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",{className:"text-center display-3 my-2 py-2"},"Boards Management"),r.a.createElement(De.a,null),r.a.createElement("div",{className:"my-2 py-2"},r.a.createElement(q.g,{pills:!0},r.a.createElement("li",{className:"nav-item"},r.a.createElement(be.a,{to:"/spots/",className:"nav-link",style:{backgroundImage:"radial-gradient(circle 248px at center, #9DC3C1 0%, #9DC3C1  47%, #9DC3C1 100%)",color:"white"}},"All Boards")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(be.a,{to:"/spots/create",className:"nav-link",style:{backgroundImage:"radial-gradient(circle 248px at center, #9DC3C1 0%, #9DC3C1  47%, #9DC3C1 100%)",color:"white"}},"Create Board")))),r.a.createElement(F.c,null,r.a.createElement(F.a,{exact:!0,path:"/spots",component:vt}),r.a.createElement(F.a,{path:"/spots/create",component:ut}))))}}]),t}(n.Component),bt={getBoards:_e,getOwner:Se},yt=Object(l.connect)(null,bt)(Et),Nt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={name:null},a.inputChangeHandler=function(e){e.persist(),console.log("in callback"),console.log(e.target.value),a.setState(function(t,a){return console.log("in async callback"),console.log({isNull:null===e.target}),console.log(e.target.value),{name:e.target.value}})},a.renderSchedules=function(){var e=a.props.requests;return console.log("requests",e),e&&e.schedules.length>0?e.schedules.map(function(e){var t,n=pt()(e.from).format("DD MM YYYY"),o=pt()(e.to).format("DD MM YYYY"),c=pt()(e.createdAt).fromNow();return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{class:"card border-warning mb-3"},r.a.createElement("div",{class:"card-header border-warning"},"Ads Name :    ",e.advert.name||"no ads name",r.a.createElement("div",{class:"btn-group",role:"group"},r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:function(){a.props.acceptRequest(e,a.props.owner)}},"Accept"),r.a.createElement("button",{type:"button",class:"btn btn-secondary",onClick:function(){a.props.rejectRequest(e,a.props.owner)}},"Reject"))),r.a.createElement("ul",{class:"list-group list-group-flush"},r.a.createElement("li",{class:"list-group-item"},"Start :  ",r.a.createElement("i",{className:"far fa-calendar-alt"}),"  ",n),r.a.createElement("li",{class:"list-group-item"},"End :  ",r.a.createElement("i",{className:"far fa-calendar-alt"}),"  ",o),r.a.createElement("li",{class:"list-group-item"},"Your Board :  ",e.board.name||"no name"),r.a.createElement("li",{class:"list-group-item"},"Advertiser :  ",e.advertiser.company||"no name"),r.a.createElement("li",{class:"list-group-item"},"Earning : $ ",(t=e.board.price.normal,pt()(e.to).diff(pt()(e.from),"days")*t),"  ")),r.a.createElement("div",{class:"card-footer bg-transparent border-warbubg"},r.a.createElement("button",{type:"button",className:"btn",style:{backgroundImage:"radial-gradient(circle 248px at center, #9DC3C1 0%, #9DC3C1  47%, #9DC3C1 100%)",color:"white"},onClick:function(){a.props.redirectToChat(e)}},"   ",r.a.createElement("i",{className:"far fa-comments"}),"Chat with Advertiser")),r.a.createElement("div",{class:"card-footer bg-transparent border-warning"},"Requested at ",c," ago.")))}):r.a.createElement("div",null,"No  Ads Requests for now.")},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.getAdsRequested(this.props.owner._id)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h4",{className:"display-4"},"Your Own Boards with ads requests from advertisers"),r.a.createElement("p",null,"Check ads requests from each board and decide to accept or reject")),r.a.createElement("div",{className:"row my-2 py-2"},r.a.createElement("div",{className:"col-md-10 col-sm-12 py-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group mb-4"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"ni ni-zoom-split-in"}))),r.a.createElement("input",{className:"form-control",placeholder:"Search ads requests by name",type:"text",name:"name",onChange:this.inputChangeHandler})))),r.a.createElement("div",{className:"col-md-2 col-sm-12  py-2"},r.a.createElement("button",{className:"btn",style:{borderRadius:"10px",backgroundImage:"radial-gradient(circle 248px at center, #F7AA97 0%, #F7AA97  47%, #F7AA97 100%)",color:"#fff"},onClick:function(){e.props.searchAdsRequested(e.props.owner._id,e.state.name)}},"Search"))),r.a.createElement("div",{className:"card-deck row"},this.renderSchedules()))}}]),t}(n.Component),wt={getAdsRequested:ke,redirectToChat:function(e){return function(t){t({type:"GET_SCHEDULE_FOR_CHAT",payload:e}),t(Object(je.d)("/chat"))}},acceptRequest:function(e,t){return function(a){w.toastr.info("please wait"),Ce.post("/owners/request/accept",{schedule:e,owner:t}).then(function(e){a(ke(t._id)),a(Se()),w.toastr.info("accepted")})}},rejectRequest:function(e,t){return function(a){w.toastr.info("please wait"),Ce.post("/owners/request/reject",{schedule:e}).then(function(e){a(ke(t._id)),w.toastr.info("rejected")})}},searchAdsRequested:function(e,t){return function(a){w.toastr.info("searching"),Ce.post("/boards/reqboards",{ownerId:e,text:t}).then(function(e){a({type:"BOARDS_WITH_ADS",payload:e.data})}).catch(function(e){})}}},Ot=Object(l.connect)(function(e){return{owner:ct(e.owner)?null:e.owner.owner,requests:ct(e.board)?null:e.board.requests}},wt)(Nt),jt=function(e){var t=e.input,a=e.rows,n=e.styleFrom,o=e.type,c=e.placeholder,l=e.meta,s=l.touched,i=l.error;return r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("div",{className:"input-group input-group-alternative"},r.a.createElement("textarea",Object.assign({type:o,className:"form-control"},t,{rows:a,placeholder:c,style:n}))),s&&i&&r.a.createElement("div",{className:"invalid-feedback"},i))};var Ct=function(e){return r.a.createElement("div",null,r.a.createElement(nt.a,{name:"email",component:function(e){var t=e.fields;return r.a.createElement("div",{className:"container my-3 py-3 "},r.a.createElement("ul",{style:{listStyle:"none"}},r.a.createElement("button",{className:"btn  btn-sm btn-primary",onClick:function(){t.push("")},type:"button"},"click to add email"),t.map(function(e,a){return r.a.createElement("li",{key:a,className:""},r.a.createElement(q.a,{close:!0,onClick:function(){return t.remove(a)}}),r.a.createElement("div",{className:"container card my-3 py-2 "},r.a.createElement(Re.a,{name:"".concat(e),type:"text",component:Be,placeholder:"click to add email",styleFrom:{color:"black"}})))})))}}))};var kt=function(e){return r.a.createElement("div",null,r.a.createElement(nt.a,{name:"phone",component:function(e){var t=e.fields;return r.a.createElement("div",{className:"container my-3 py-3 "},r.a.createElement("ul",{style:{listStyle:"none"}},r.a.createElement("button",{className:"btn  btn-sm btn-primary",onClick:function(){t.push("")},type:"button"},"click to add phone number"),t.map(function(e,a){return r.a.createElement("li",{key:a,className:""},r.a.createElement(q.a,{close:!0,onClick:function(){return t.remove(a)}}),r.a.createElement("div",{className:"container card my-3 py-2 "},r.a.createElement(Re.a,{name:"".concat(e),type:"text",component:Be,placeholder:"click to add phone number",styleFrom:{color:"black"}})))})))}}))},St=function(e){function t(){return Object(L.a)(this,t),Object(Y.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitCallBack,n=e.selectRegion,o=e.selectCountry,c=e.country,l=e.region;return console.log(this.props.initialValues),r.a.createElement("div",{className:"container my-3 py-3"},r.a.createElement("form",{onSubmit:t(a)},r.a.createElement("div",{className:"col-12"},r.a.createElement(Re.a,{component:Be,name:"company",placeholder:"company",type:"text"})),r.a.createElement("div",{className:"row my-2 py-2"},r.a.createElement("div",{className:"col-lg-6 col-md-6"},r.a.createElement(Re.a,{component:jt,name:"address.line1",placeholder:"line 1",type:"text"})),r.a.createElement("div",{className:"col-lg-6 col-md-6"},r.a.createElement(Re.a,{component:jt,name:"address.line2",placeholder:"line 2"})),r.a.createElement("div",{className:"col-lg-4 col-md-4"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 col-sm-12 mb-2"},r.a.createElement(Le.a,{value:c,onChange:function(e){return o(e)},classes:"custom-select"})),r.a.createElement("div",{className:"col-lg-6 col-sm-12"},r.a.createElement(Le.b,{country:c,value:l,onChange:function(e){return n(e)},classes:"custom-select",showDefaultOption:!0}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement(Ct,null)),r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement(kt,null))),r.a.createElement("h5",{className:"text-center"},"Stripe Payment"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement(Re.a,{component:Be,name:"stripe.publicId",placeholder:"stripe public id"})),r.a.createElement("div",{className:"col-md-6 col-lg-6"},r.a.createElement(Re.a,{component:Be,name:"stripe.secretId",placeholder:"stripe secret id"}))),r.a.createElement("button",{className:"btn btn-outline-warning btn-block"},"Edit Profile")))}}]),t}(n.Component),_t=Object(Te.a)({form:"create-profile"})(St),xt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={country:"Tunisia",region:"Tunis"},a.submitHandler=function(e){var t={address:{line1:e.address.line1,line2:e.address.line2,country:a.state.country,region:a.state.region},stripe:e.stripe,phone:e.phone,email:e.email,company:e.company};console.log(e._id),a.props.createProfile(e._id,t)},a.selectCountry=function(e){a.setState({country:e})},a.selectRegion=function(e){a.setState({region:e})},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"text-center display-4"},"Agency Profile"),r.a.createElement("p",{className:"text-center "},"this is profile information which will show on your display boards so that advertisers or users can contact you "),r.a.createElement(_t,{submitCallBack:this.submitHandler,initialValues:this.props.owner,selectCountry:function(t){e.selectCountry(t)},selectRegion:function(t){e.selectRegion(t)},country:this.state.country,region:this.state.region}))}}]),t}(n.Component),At={createProfile:function(e,t){return function(a){Ce.post("/owners/profile/create",Object(u.a)({ownerId:e},t)).then(function(e){w.toastr.info("edit the profile"),a(Se())})}}},It=Object(l.connect)(function(e){return{owner:ct(e.owner)?null:e.owner.owner}},At)(xt);var Dt=Object(Te.a)({form:"edit-user"})(function(e){var t=e.handleSubmit,a=e.submitCallBack;return r.a.createElement("form",{onSubmit:t(a)},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-lg-4"},r.a.createElement(Re.a,{component:Be,name:"username",type:"text"})),r.a.createElement("div",{className:"col-md-4 col-lg-4"},r.a.createElement(Re.a,{component:Be,name:"email",type:"text"})),r.a.createElement("div",{className:"col-md-4 col-lg-4"},r.a.createElement(Re.a,{component:Be,name:"password",type:"password",placeholder:"enter new password"}))),r.a.createElement("button",{type:"submit",className:"btn btn-block btn-outline-primary"},"Change")))}),Rt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).getTotalIncomeFromInvoices=function(){var e=a.props.invoices;return a.props.invoices&&a.props.invoices.length>0?r.a.createElement("span",null,"$ ",lt(e)):r.a.createElement("span",null," $ 0")},a.renderInvoices=function(){return a.props.invoices&&a.props.invoices.length>0?a.props.invoices.map(function(e){return r.a.createElement("div",{className:"col-12 my-2 py-2"},r.a.createElement("div",{className:"card shadow"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h4",{className:""},"Income :    $",e.amount)),r.a.createElement("div",{className:"card-title p-2 m-2"},"From Advertiser :     ",e.advertiser.company),r.a.createElement("div",{className:"card-title p-2 m-2"},"Received at  :     ",pt()(e.createdAt).format("DD MM YYYY"))))}):r.a.createElement("div",{className:"container text-center"},r.a.createElement("h4",null,"No Invoices yet"))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container my-2 py-2"},r.a.createElement("h4",null,"Total Incomes : ",this.getTotalIncomeFromInvoices()),this.renderInvoices())}}]),t}(n.Component),Tt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).submitHandler=function(e){a.props.editUser(e)},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t;return this.props.user&&(e=this.props.user.username,t=this.props.user.email),console.log(this.props.user),r.a.createElement("div",{className:"container"},r.a.createElement("h5",{className:"text-center display-4"},"User Account of Owner"),r.a.createElement("div",{className:"my-3 py-3"},r.a.createElement(Dt,{submitCallBack:this.submitHandler,initialValues:{email:t,username:e}})),r.a.createElement("h5",{className:"text-center display-4"},"Incomes from your boards"),r.a.createElement(Rt,{invoices:this.props.owner.invoices}))}}]),t}(n.Component),Bt=Object(l.connect)(function(e){return{owner:e.owner?e.owner.owner:null}})(Tt),Lt=a(263),Mt=a.n(Lt);var Yt=Object(Te.a)({form:"create-message"})(function(e){var t=e.handleSubmit,a=e.submitCallBack;return r.a.createElement("form",{onSubmit:t(a)},r.a.createElement("div",{className:"row my-2 py-2 card shadow mx-2 px-2"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement(Re.a,{component:jt,name:"message",placeholder:"your message"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("button",{className:"btn",type:"submit",style:{backgroundImage:"radial-gradient(circle 248px at center, #F7AA97 0%, #F7AA97  47%, #F7AA97 100%)",color:"#fff"}},"Send"))))}),Ht=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).submitHandler=function(e){console.log("currentUser",a.props.currentUser),console.log("currentRoon",a.props.currentRoom),a.props.currentRoom&&a.props.currentUser&&a.props.sendMessage(a.props.currentUser,a.props.currentRoom,e)},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(Mt.a.messageBoxWrapper," m-2 p-2")},r.a.createElement(Yt,{submitCallBack:this.submitHandler}))}}]),t}(n.Component),Ut=a(57),Ft=a.n(Ut),qt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderMessages=function(){var e=a.props,t=e.messages,n=e.owner;return t.length>0?t.map(function(e){if(n)return e.senderId===n._id?r.a.createElement("div",{className:"".concat(Ft.a.container)},r.a.createElement("img",{src:"https://via.placeholder.com/150",alt:"Avatar"}),r.a.createElement("p",null,e.text),r.a.createElement("span",{className:"".concat(Ft.a.timeRight)},pt()(e.updatedAt).format("DD MM YYYY H A"))):r.a.createElement("div",{className:"".concat(Ft.a.container," ").concat(Ft.a.darker)},r.a.createElement("img",{src:"https://via.placeholder.com/150",alt:"Avatar",className:"".concat(Ft.a.imgRight)}),r.a.createElement("p",null,e.text),r.a.createElement("span",{className:"".concat(Ft.a.timeLeft)},pt()(e.updatedAt).format("DD MM YYYY H A")))}):r.a.createElement("div",{className:"text-center my-2 py-2"},r.a.createElement("h4",null,"Loading messages wait a moment or there are no messages at all."))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(Ft.a.ListsWrapper," my-2 py-2 card mx-2 px-2")},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"text-center"},this.props.schedule.advertiser.company||"advertiser")),this.renderMessages())}}]),t}(n.Component),Pt=a(264),zt=a.n(Pt),Gt=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={messages:[],currentRoom:null,currentUser:null,isLoading:!0},a.connectToRoom=function(e,t){return console.log("id",e),console.log("currentUser",t),t.subscribeToRoom({roomId:"".concat(e),messageLimit:100,hooks:{onMessage:function(e){a.setState({messages:[].concat(Object(We.a)(a.state.messages),[e])})}}}).then(function(e){a.setState({currentRoom:e})})},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.owner&&this.props.schedule&&this.props.connectToChat({id:this.props.owner._id,name:this.props.schedule.advertiser.company||"advertiser"},this.props.schedule._id,function(t,a){return e.setState({currentUser:t}),a.exist?t.id!==e.props.owner._id?(console.log("different account"),t.addUserToRoom({userId:e.props.owner._id,roomId:a.roomId}).then(function(){e.connectToRoom(a.roomId,t)})):(console.log("same account"),void e.connectToRoom(a.roomId,t)):t.createRoom({name:e.props.schedule._id,id:e.props.schedule._id}).then(function(a){return e.connectToRoom(a.id,t)})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(zt.a.ChatBoxWrapper)},r.a.createElement("div",null,r.a.createElement(qt,{messages:this.state.messages,schedule:this.props.schedule,owner:this.props.owner})),r.a.createElement("div",{className:"position-relative"},r.a.createElement(Ht,{sendMessage:this.props.sendMessage,currentUser:this.state.currentUser,currentRoom:this.state.currentRoom})))}}]),t}(n.Component),Wt={connectToChat:function(e,t,a){return function(n){ce.post("/chats/users",{user:e}).then(function(){var r=new re.a.TokenProvider({url:"".concat(oe,"api/v1/chats/authenticate")});return new re.a.ChatManager({instanceLocator:"v1:us1:bb5df3cd-5dc0-47a0-af60-dc0e87479b25",userId:e.id,tokenProvider:r,connectionTimeout:2e4}).connect().then(function(e){n(le(t,function(t){a(e,t)}))})})}},isRoomExist:le,sendMessage:function(e,t,a){return console.log("currentUser",e),console.log("currentRoom",t),console.log("message",a.message),function(n){e.sendMessage({text:a.message,roomId:"".concat(t.id)}),n(Object(ae.a)("create-message"))}}},Vt=Object(l.connect)(function(e){return{owner:ct(e.owner)?null:e.owner.owner,schedule:ct(e.board)?null:e.board.schedule}},Wt)(Gt),Kt=(a(731),function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderTodayAds=function(){var e=a.props.todaySchedules;return console.log("today schedules",e),e&&e.length>0?e.map(function(e,t){return r.a.createElement("div",{className:"col-md-4 my-2 py-2"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{class:"card-header text-center"},e.advert.name),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-title"},"info :  ",e.advert.note)),r.a.createElement("ul",{class:"list-group list-group-flush"},r.a.createElement("li",{class:"list-group-item"},"      Board :   ",e.board.name),r.a.createElement("li",{class:"list-group-item"},"End in : ",pt()(e.to).format("DD MM YYYY")),r.a.createElement("li",{class:"list-group-item"},"Advertiser : ",e.advertiser.company),r.a.createElement("li",{class:"list-group-item"}))))}):r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"text-center"},"No Running Ads Today. "))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h5",{className:"display-4 text-center"},"Today Running Ads | ",pt()(Date.now()).format("DD MM YYYY")),this.renderTodayAds())}}]),t}(n.Component)),Jt=function(e){var t=e.options,a=e.value,n=e.onChange,o=e.title,c=e.placeholder;return r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("select",{className:"custom-select",value:a,onChange:function(e){n(e.target.value),console.log(e.target.value)},placeholder:c,options:t},r.a.createElement("option",null,"Select ",o),t.map(function(e){return r.a.createElement("option",{value:e.value},e.key)})))},$t=a(265),Zt=a.n($t),Qt=te.getInstance(),Xt=a(118),ea=a.n(Xt),ta=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderAdvertLists=function(e){return r.a.createElement("div",{className:"row"},e.map(function(e,t){return r.a.createElement("div",{className:"col-md-4 my-2 py-2"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{class:"card-header text-center"},e.advert.name),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-title"},"info :  ",e.advert.note)),r.a.createElement("ul",{class:"list-group list-group-flush"},r.a.createElement("li",{class:"list-group-item"},"      Board :   ",e.board.name),r.a.createElement("li",{class:"list-group-item"},"End in : ",pt()(e.to).format("DD MM YYYY")),r.a.createElement("li",{class:"list-group-item"},"Advertiser : ",e.advertiser.company),r.a.createElement("li",{class:"list-group-item"}))))}))},a.renderAdvert=function(){var e=a.props.schedules,t=[];if(e){for(var n in e)t.push({name:n,arrTo:e[n]});return t.map(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"my-3 py-3"},r.a.createElement("span",{className:"".concat(ea.a.dateSpan)},pt()(e.name).format("DD MM YYYY"))),a.renderAdvertLists(e.arrTo))})}return r.a.createElement("div",null,r.a.createElement("h4",null,"Loading please wait "))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return console.log("schedules date",this.props.schedules),r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"text-center"},"By Date"),this.renderAdvert())}}]),t}(n.Component),aa=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).renderAdvertLists=function(e){return r.a.createElement("div",{className:"row"},e.map(function(e,t){return r.a.createElement("div",{className:"col-md-4 my-2 py-2"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{class:"card-header text-center"},e.advert.name),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-title"},"info :  ",e.advert.note)),r.a.createElement("ul",{class:"list-group list-group-flush"},r.a.createElement("li",{class:"list-group-item"},"    Start :   ",pt()(e.from).format("DD MM YYYY")),r.a.createElement("li",{class:"list-group-item"},"End in : ",pt()(e.to).format("DD MM YYYY")),r.a.createElement("li",{class:"list-group-item"},"Advertiser : ",e.advertiser.company),r.a.createElement("li",{class:"list-group-item"}))))}))},a.renderAdvert=function(){var e=a.props.schedules,t=[];if(e){for(var n in e)t.push({name:n,arrTo:e[n]});return t.map(function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"my-3 py-3"},r.a.createElement("span",{className:"".concat(ea.a.dateSpan)},e.name)),a.renderAdvertLists(e.arrTo))})}return r.a.createElement("div",null,r.a.createElement("h4",null,"Loading please wait "))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"text-center"},"By Board"),this.renderAdvert())}}]),t}(n.Component),na=function(e){function t(){var e,a;Object(L.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(o)))).state={group:"board"},a.onGroupChange=function(e){a.setState({group:e},function(){a.props.getSchedulesBy({type:"owner",_id:a.props.owner._id},a.state.group)})},a.boardSchedules=function(){return r.a.createElement(aa,{schedules:a.props.schedules?a.props.schedules:null})},a.dateSchedules=function(){return r.a.createElement(ta,{schedules:a.props.schedules?a.props.schedules:null})},a.renderGroupedSchedules=function(){switch(a.state.group){case"board":return a.boardSchedules();case"date":return a.dateSchedules()}},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.props.getSchedulesBy({type:"owner",_id:this.props.owner._id},this.state.group),this.props.todaySchedules(this.props.owner._id)}},{key:"render",value:function(){console.log(this.props.schedules);return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(Kt,{todaySchedules:this.props.today||[]}),r.a.createElement(De.a,null),r.a.createElement("div",{className:"my-3 py-3"},r.a.createElement(Jt,{options:[{key:"Group by Date",value:"date"},{key:"Group by Board",value:"board"}]||[],value:this.state.group,onChange:this.onGroupChange,title:"group",placeholder:"choose group"})),r.a.createElement("div",{className:"my-3 py-3 text-center"},r.a.createElement("span",{className:"".concat(Zt.a.totalSpan)}," ",this.props.totalItems||0,"  ads  running in your boards")),this.renderGroupedSchedules())}}]),t}(n.Component),ra={getSchedulesBy:function(e,t){return function(a){Qt.post("/schedules/get",{actor:e,group:t}).then(function(e){a({type:"SCHEDULES_BY",payload:e.data})})}},todaySchedules:function(e){return function(t){Qt.post("/schedules/now",{type:"owner",ownerId:e}).then(function(e){t({type:"TODAY_SCHEDULES",payload:e.data.schedules})}).catch(function(e){console.log(e)})}}},oa=Object(l.connect)(function(e){return{owner:e.owner.owner||null,schedules:ct(e.schedules.schedules)?null:e.schedules.schedules.schedules,totalItems:ct(e.schedules.schedules)?null:e.schedules.schedules.totalItems,today:ct(e.schedules.today)?null:e.schedules.today}},ra)(na),ca=function(e){function t(){var e,a;Object(L.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(a=Object(Y.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(c)))).state={dropdownOpen:!1,direction:!1,changeStyle:!1},a.componentDidMount=function(){window.ga("create","","auto"),a.props.auth(),a.props.getBoards(),a.props.getOwner()},a.toggle=function(){a.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},a.onMouseEnter=function(){a.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},a.onMouseLeave=function(){a.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},a.changeWidth=function(){a.setState(function(e){return{changeStyle:!e.changeStyle}})},a.changeDirection=function(){a.setState(function(e){return{direction:!e.direction}})},a.logoutUser=function(){a.props.logoutUser()},a.renderSettingBar=function(){return r.a.createElement(q.c,{isOpen:a.state.dropdownOpen,toggle:a.toggle,onMouseEnter:function(){setTimeout(function(){a.onMouseEnter()},200)},onMouseLeave:a.onMouseLeave},r.a.createElement(q.f,{nav:!0},r.a.createElement("a",{className:"nav-link nav-link-icon ",href:"#",id:"navbar-default_dropdown_1",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"ni ni-circle-08",style:{fontSize:"36px",color:"white"}}),r.a.createElement("span",{className:"nav-link-inner--text d-lg-none"},"Advertiser"))),r.a.createElement(q.e,null,r.a.createElement(q.d,null,r.a.createElement("button",{className:"dropdown-item",onClick:a.logoutUser},"LogOut"))))},a.renderMainContents=function(){var e="2",t="10",o="left";return a.state.changeStyle&&(e="1",t="11"),a.state.direction&&(o="right"),r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:" col-xl-".concat(e," ").concat(W.a.sidebar," fixed-top")},r.a.createElement(Oe,{changeStyle:a.state.changeStyle})),r.a.createElement("div",{className:"col-xl-".concat(t," col-lg-11  ml-auto  fixed-top"),style:{backgroundImage:"radial-gradient(circle 248px at center, #9B8281 0%, #9B8281  47%, #9B8281 100%)"}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"mr-auto p-3 "},r.a.createElement("a",{style:{color:"#fff",cursor:"pointer"},onClick:function(){a.changeWidth(),a.changeDirection()}},r.a.createElement("i",{className:" ni ni-bold-".concat(o),style:{fontSize:"25px"}}))),r.a.createElement("span",{className:"p-3",style:{color:"#fff"}},a.props.owner?a.props.owner.company:"no company name"),a.renderSettingBar()))))),r.a.createElement(ge,null),r.a.createElement("section",{className:"py-4 my-4"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xl-".concat(t," col-lg-10 ml-auto")},r.a.createElement(F.c,null,r.a.createElement(F.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(Ie,null)}}),r.a.createElement(F.a,{path:"/spots",render:function(e){return r.a.createElement(yt,null)}}),r.a.createElement(F.a,{path:"/ads",render:function(e){return r.a.createElement(Ot,null)}}),r.a.createElement(F.a,{path:"/profile",render:function(e){return r.a.createElement(It,null)}}),r.a.createElement(F.a,{path:"/chat",render:function(e){return r.a.createElement(Vt,null)}}),r.a.createElement(F.a,{path:"/schedules",render:function(e){return r.a.createElement(oa,null)}}),r.a.createElement(F.a,{path:"/account",render:function(e){return r.a.createElement(Bt,{user:a.props.user,editUser:a.props.editUser})}})),r.a.createElement(z.a,{pageId:"836186800088732",appId:"1349261215239476",htmlRef:""}))))))},a.renderUnAuthenticated=function(){return r.a.createElement("div",null,r.a.createElement(he,null))},a}return Object(U.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return function(e){if(window.ga){if("/sign-up"==e.pathname){var t=e.pathname;ve.setPageAndSendToGA(t)}if(10==e.search.length){var a=e.pathname+e.search;ve.setPageAndSendToGA(a)}}}(this.props.location),this.props.isAuth&&this.props.isAuth?this.renderMainContents():this.renderUnAuthenticated()}}]),t}(r.a.Component),la={logoutUser:function(e){return function(e){$.deleteToken(),window.location.assign("https://www.spotads.live")}},auth:se,getBoards:_e,getOwner:Se,editUser:function(e){return function(t){Ce.post("/users/edit",Object(u.a)({},e)).then(function(e){t(se()),w.toastr.success("changed user account")})}}},sa=Object(F.f)(Object(l.connect)(function(e){return{isAuth:e.user.userData?e.user.userData.isAuth:null,user:e.user.userData&&e.user.userData.isAuth?e.user.userData.owner.user:null,owner:e.user.userData&&e.user.userData.isAuth?e.user.userData.owner:null}},la)(ca)),ia=(a(749),B().store);c.a.render(r.a.createElement(l.Provider,{store:ia},r.a.createElement(N.a,{history:B().history},r.a.createElement("div",null,r.a.createElement(O.a,{position:"bottom-right",transitionIn:"fadeIn",transitionOut:"fadeOut"}),r.a.createElement(sa,null)))),document.getElementById("root"))}},[[396,2,1]]]);
//# sourceMappingURL=main.99a79df2.chunk.js.map